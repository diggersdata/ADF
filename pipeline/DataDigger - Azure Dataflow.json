{
	"name": "DataDigger - Azure Dataflow",
	"properties": {
		"description": "Master pipeline to move the data from within Azure services",
		"activities": [
			{
				"name": "Azure Blob to Stage - Main File",
				"type": "ExecutePipeline",
				"dependsOn": [],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Copy From Blob To SQL DB",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			},
			{
				"name": "Azure Blob to Stage - Lookup File CityGeo",
				"type": "ExecutePipeline",
				"dependsOn": [],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Load Stg CityGeo",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			},
			{
				"name": "Azure Blob to Stage - Lookup File Countries",
				"type": "ExecutePipeline",
				"dependsOn": [],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Load Stg Countries",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			},
			{
				"name": "Load EDW Dimensions",
				"type": "ExecutePipeline",
				"dependsOn": [
					{
						"activity": "Azure Blob to Stage - Main File",
						"dependencyConditions": [
							"Succeeded"
						]
					},
					{
						"activity": "Azure Blob to Stage - Lookup File CityGeo",
						"dependencyConditions": [
							"Succeeded"
						]
					},
					{
						"activity": "Azure Blob to Stage - Lookup File Countries",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Load Dimensions",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			},
			{
				"name": "Load EDW Facts",
				"type": "ExecutePipeline",
				"dependsOn": [
					{
						"activity": "Load EDW Dimensions",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Load Facts",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			},
			{
				"name": "Refresh AAS Tabular Model",
				"type": "ExecutePipeline",
				"dependsOn": [
					{
						"activity": "Load EDW Facts",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"userProperties": [],
				"typeProperties": {
					"pipeline": {
						"referenceName": "Refresh AAS D3Model",
						"type": "PipelineReference"
					},
					"waitOnCompletion": true
				}
			}
		],
		"annotations": []
	}
}